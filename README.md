# 개요

## 1) 프로젝트 배경

- **SSAFIT**은 사용자의 운동 콘텐츠 탐색, 추천, 기록 관리까지 지원하는 피트니스 플랫폼이다.
- 서비스 특성상 **영상 데이터**(운동 강의, 리뷰, 태그)와 **사용자 활동 데이터**(조회, 좋아요, 찜, 팔로우)가 빠르게 쌓인다.
- 단순 CRUD만으로는 검색 속도 저하, 추천 품질 저하, 실시간성 부족이 발생할 수 있다.
- 따라서 **자료구조와 알고리즘을 적절히 적용**해 성능·사용자 경험을 강화하는 것이 필수적이다.

## 2) 기획 의도

- **검색 최적화**: 문자열 검색·자동완성 알고리즘을 적용해 키워드 탐색 속도를 높인다.
- **추천 품질 향상**: 그래프 탐색·비트마스킹으로 개인화 추천을 구현한다.
- **실시간 반응성**: 힙, 큐 등 자료구조를 활용해 Top-N 인기 콘텐츠, 팔로우 피드 등 실시간성이 중요한 기능을 빠르게 제공한다.
- **위치 기반 확장성**: 그래프 탐색(Dijkstra 등)을 활용해 주변 헬스장 검색·경로 안내 기능을 지원한다.
- **데이터 신뢰성**: 온라인 평균 계산 등 통계 알고리즘을 적용해 대규모 리뷰·평점을 정확하고 효율적으로 집계한다.

## 3) 기대 효과

- **사용자 경험(UX) 개선**: 검색·추천 속도 향상, 콘텐츠 접근성 강화
- **운영 효율성**: 실시간 집계·정렬로 서버 부담 완화
- **서비스 차별화**: AI와 전통 알고리즘의 결합으로 스마트 피트니스 코칭 서비스 제공
- **확장 가능성**: 데이터 증가에도 안정적으로 동작하는 구조 확보

# 알고리즘 적용

## 1) 자료구조 & 알고리즘 설계 개요

| 번호 | 데이터 / 기능 | 자료구조 / 적용 알고리즘 | 비고 |
| --- | --- | --- | --- |
| DS-01 | 회원 정보 | `ArrayList<User>` | 가입자 목록 순서대로 보관, 인덱스 접근 빠름 |
| DS-02 | 로그인/세션 | `Map<token, Session>` | 토큰→세션 즉시 조회 |
| DS-03 | 영상 마스터 | `ArrayList<Video>` + 보조 인덱스(Map) | 스크롤/페이징 적합 |
| DS-04 | 영상별 리뷰 | `Map<videoId, List<Review>>` | “영상→리뷰들” 바로 접근 |
| DS-05 | 사용자 찜 | `Set<videoId>` | 중복 방지, 포함 여부 빠름 |
| DS-06 | 조회수/좋아요 집계 | `Map<videoId, Counter>` | 실시간 카운트 업데이트 |
| DS-07 | 인기 Top-N | `PriorityQueue<Video>` (Heap) | 상위 N개만 유지 (전체 정렬 불필요) |
| DS-08 | 팔로우/팔로잉 | 인접리스트 `Map<uid, List<uid>>` | 사람↔사람 관계 탐색 |
| DS-09 | 검색 인덱스 | `Map<keyword, List<videoId>>` | 키워드→영상 역색인 |
| DS-10 | 운동 계획 | `Map<LocalDate, List<Plan>>` | 날짜별 계획 관리 |
| DS-11 | 자동완성 사전 | `Trie` | 접두어 검색 빠름 |
| DS-12 | 태그/부위 유사도 | `BitMask(int/long)` | 교집합·유사도 계산 |
| DS-13 | 활동 로그 피드 | `Queue<Activity>` + Min-Heap merge | 시간순 스트림 병합 |
| DS-14 | 헬스장 네트워크 | `Graph (AdjList<Node, Edge>)` + PQ | 최단 경로 탐색(Dijkstra) |
| Algo-01 | 내 주변 헬스장 검색 | 위도·경도 기반 하버사인 거리 계산 + Top-K 정렬. 도로망 기반은 BFS/Dijkstra 적용 | 위치 기반 추천 |
| Algo-02 | 제목/설명 부분일치 검색 | 문자열 매칭 (KMP, Boyer–Moore, Rabin–Karp) | 검색 속도 개선 |
| Algo-03 | 인기/랭킹 정렬 | 최소힙으로 Top-K 유지, 필요 시 힙정렬/카운팅정렬 활용 | 홈 화면 인기 노출 |
| Algo-04 | 개인화 추천 | 그래프 BFS(팔로우 확장) + 비트마스킹(태그 유사도 계산) | 소셜+취향 기반 추천 |
| Algo-05 | 리뷰/평점 집계 | Online Mean/Variance 증분 계산 | 빠른 평균 응답 |
| Algo-06 | 자동완성/검색어 추천 | Trie 기반 접두어 탐색 + BFS 후보 수집 | 입력 보조 기능 |
| Algo-07 | 팔로우 피드 병합 | Min-Heap으로 k-way merge | 최신순 피드 구성 |

## 2) 기능별 알고리즘 적용 상세

### Algo-01. 제목/설명 부분일치 검색 (KMP / Boyer–Moore / Rabin–Karp)

- **목적**
    
    영상 제목·설명에서 키워드를 빠르게 찾아 사용자 탐색 경험을 개선한다.
    
- **데이터 / 기능**
    
    영상 메타데이터(제목, 설명) / 영상 검색 기능
    
- **자료구조 / 적용 알고리즘**
    - 자료구조: 배열(char[]), ArrayList
    - 알고리즘: KMP(선형 보장), Boyer–Moore(평균 건너뛰기), Rabin–Karp(다중 패턴)
- **상세 내용**
    
    검색어를 입력받아 제목/설명 배열을 순회하며 매칭 알고리즘을 수행. 매칭된 위치는 하이라이트 처리해 결과 반환.
    
- **알고리즘 선택(기본) / 선택 이유 / 대안**
    - **기본**: KMP — 최악의 경우에도 O(n+m)로 안정적, 구현 난이도/성능 균형 좋음
    - **선택 이유**: 단일 키워드 위주, 한국어 포함 긴 본문에서도 일관된 성능 보장
    - **대안**: Boyer–Moore(영문/숫자 위주 긴 본문 평균 성능↑), Rabin–Karp(다중 패턴 동시 검사)
- **이점**
    - KMP: 최악의 경우에도 O(n+m)
    - BM: 긴 문자열 평균 성능 우수
    - RK: 다중 패턴 검출 유리
- **이슈사항**
    - 한글(UTF-16) 인코딩 고려 필요
    - 설명까지 확장 시 성능 저하 → 인덱싱 필요
    - 다중 키워드 시 반복 실행 부담

---

### Algo-02. 인기/랭킹 정렬 (힙 / 힙정렬 / 카운팅·버킷정렬)

- **목적**
    
    조회수, 좋아요, 최신성을 반영해 상위 인기 영상을 빠르게 노출한다.
    
- **데이터 / 기능**
    
    영상 점수(views, likes, recency) / 홈 화면 인기 영상
    
- **자료구조 / 적용 알고리즘**
    - 자료구조: 최소힙(PriorityQueue), 배열 기반 점수 캐시
    - 알고리즘: Top-K 힙 유지, 힙정렬, 카운팅·버킷정렬
- **상세 내용**
    
    이벤트 발생 시 점수 갱신 → 힙에 삽입/교체 → 홈 화면 요청 시 상위 K개를 정렬해 반환.
    
    값 범위가 좁으면 카운팅/버킷정렬로 효율 개선.
    
- **알고리즘 선택(기본) / 선택 이유 / 대안**
    - **기본**: 최소힙 Top-K 유지 — 전체 정렬 없이 상위 N만 관리(삽입/삭제 O(log N))
    - **선택 이유**: 홈 상단 Top-N 노출이 핵심, 실시간 이벤트 반영 용이
    - **대안**: 힙정렬(전체 랭킹 페이지 요구 시), 카운팅/버킷정렬(views/likes 범위 좁은 정수일 때 선형 시간)
- **이점**
    - 전체 정렬 불필요 → 응답 지연 단축
    - Top-K 캐싱으로 홈 진입 속도↑
    - 데이터 특성에 따라 다양한 정렬 알고리즘 활용 가능
- **이슈사항**
    - 이벤트 폭주 시 점수 재계산 비용↑
    - 점수 가중치 설계의 주관성

---

### Algo-03. 개인화 추천 (그래프 BFS + 비트마스킹)

- **목적**
    
    사용자 취향과 소셜 신호를 반영한 개인화된 추천 영상을 제공한다.
    
- **데이터 / 기능**
    
    사용자 시청/찜 기록, 팔로우 관계 / 추천 기능
    
- **자료구조 / 적용 알고리즘**
    - 자료구조: 그래프(User–User, User–Video), 큐, 비트마스크(tagMask)
    - 알고리즘: BFS 탐색, 비트마스킹 AND·POPCOUNT
- **상세 내용**
    
    BFS로 팔로우한 사용자들의 활동을 수집 → 그들의 좋아요 영상을 후보군으로 생성 → 비트마스킹으로 태그 유사도 계산 → 점수 순으로 추천.
    
- **알고리즘 선택(기본) / 선택 이유 / 대안**
    - **기본**: BFS + 비트마스킹 — 학습 없이도 가볍게 개인화 추천 가능, 실시간성 우수
    - **선택 이유**: 초기 데이터 희소 상황에서도 동작, 구현 난이도 대비 효과 큼
    - **대안**: (후속) 가중 그래프의 다익스트라(친밀도/신뢰도 반영), 아이템 유사도(코사인) 전처리
- **이점**
    - BFS로 빠른 이웃 탐색
    - 비트마스킹으로 고속 유사도 연산
    - 개인화 + 소셜 추천 동시 달성
- **이슈사항**
    - 희소 데이터로 인한 추천 품질 저하
    - 신규 사용자/영상(콜드스타트) 문제
    - 탐색 깊이 확장 시 성능 저하

---

### Algo-04. 내 주변 헬스장 검색 (BFS / Dijkstra)

- **목적**
    
    현재 위치 기준으로 가장 가까운 헬스장을 추천해 위치 기반 편의성을 높인다.
    
- **데이터 / 기능**
    
    헬스장 좌표, 도로 네트워크 / 위치 기반 검색 기능
    
- **자료구조 / 적용 알고리즘**
    - 자료구조: 그래프(정점=교차로, 간선=도로), 우선순위큐
    - 알고리즘: BFS(균일 가중치), Dijkstra(최단 거리/시간)
- **상세 내용**
    
    단순 반경 내 검색: 위도·경도로 하버사인 거리 계산 후 정렬.
    
    도로 네트워크 기반: Dijkstra로 출발지→헬스장 최단 경로 탐색.
    
- **알고리즘 선택(기본) / 선택 이유 / 대안**
    - **기본**: 하버사인 거리 + Top-K 정렬 — 구현 간단, 위치 기반 근접 추천에 충분히 빠름
    - **선택 이유**: 실서비스 초기엔 반경 검색이 비용/효과 최적
    - **대안**: BFS(격자/도보 동일 가중 근사), Dijkstra(실제 소요시간/경로 품질 중요할 때)
- **이점**
    - 단순 거리/실제 경로 기반 탐색 모두 지원
    - Top-K 헬스장 추천으로 탐색 효율↑
- **이슈사항**
    - 교통량 반영이 어렵고 실시간 업데이트 필요
    - 좌표 데이터 품질이 결과 정확도에 직접 영향

---

### Algo-05. 리뷰/평점 집계 (배열 / 연결리스트 / 온라인 평균)

- **목적**
    
    많은 리뷰에도 빠르게 평균 평점을 계산해 상세 페이지 응답 속도를 보장한다.
    
- **데이터 / 기능**
    
    리뷰 점수, 리뷰 리스트 / 영상 상세 페이지
    
- **자료구조 / 적용 알고리즘**
    - 자료구조: 배열(ArrayList), 연결리스트(수정/삭제 유리)
    - 알고리즘: Online Mean (증분 평균), Online Variance
- **상세 내용**
    
    리뷰 추가 시 `avg = avg + (r - avg)/cnt`로 즉시 업데이트.
    
    수정/삭제는 필요 시 해당 영상 리뷰 리스트 재스캔.
    
- **알고리즘 선택(기본) / 선택 이유 / 대안**
    - **기본**: Online Mean — 입력마다 O(1)로 평균 갱신, 실시간 응답에 최적
    - **선택 이유**: 조회 빈번·리뷰 수 증가 상황에서 전체 스캔 회피
    - **대안**: 주기적 배치 재계산(정합 보정), 세그먼트 트리(구간 통계 다수일 때)
- **이점**
    - 전체 스캔 없이 평균/분산 유지 가능
    - 응답 속도 향상, 통계 재사용 가능
- **이슈사항**
    - 동시성 제어 필요
    - 악성 리뷰/스팸 필터링 필요

---

### Algo-06. 자동완성/검색어 추천 (Trie / 큐)

- **목적**
    
    사용자가 입력 중일 때 관련 검색어를 즉시 제안해 탐색 효율을 높인다.
    
- **데이터 / 기능**
    
    검색어 사전, 인기 태그 / 검색 보조 기능
    
- **자료구조 / 적용 알고리즘**
    - 자료구조: Trie(접두어 검색), 큐(BFS 탐색)
    - 알고리즘: 접두 매칭, BFS로 후보 수집
- **상세 내용**
    
    Trie에서 입력 접두어 탐색 → 하위 노드 단어를 BFS로 수집 → 빈도/최근성 순으로 정렬 후 응답.
    
- **알고리즘 선택(기본) / 선택 이유 / 대안**
    - **기본**: Trie — 접두 검색 O(L), 응답 일관성 좋고 구현 명확
    - **선택 이유**: 전형적 자동완성 요구에 최적, 실시간 타이핑 대응
    - **대안**: n-gram 역색인(부분일치/오타 내성), 큐는 후보 수집용
- **이점**
    - 빠른 접두 검색 (O(L))
    - 사용자 오타/부분 입력에도 추천 가능
- **이슈사항**
    - Trie 메모리 사용량↑
    - 한글 처리 시 자모/음절 단위 분해 규칙 필요

---

### Algo-07. 팔로우 피드 머지 (힙 / 큐)

- **목적**
    
    팔로우한 사용자들의 활동을 최신순으로 병합해 피드를 제공한다.
    
- **데이터 / 기능**
    
    팔로우 그래프, 활동 로그 / 소셜 피드 기능
    
- **자료구조 / 적용 알고리즘**
    - 자료구조: 큐(팔로우 사용자별 활동 스트림), 최소힙(병합 정렬)
    - 알고리즘: k-way merge
- **상세 내용**
    
    각 팔로우의 활동 스트림(시간순 정렬)을 큐로 관리 → 최소힙으로 다중 스트림 병합 → 최신순으로 피드 구성.
    
- **알고리즘 선택(기본) / 선택 이유 / 대안**
    - **기본**: 최소힙 k-way 병합 — k개 정렬 리스트를 로그 비용으로 병합
    - **선택 이유**: 팔로우 수가 늘어도 확장성 확보, 최신성 유지 쉬움
    - **대안**: 투포인터 병합(리스트 2개일 때), 배치 스냅샷 + 정렬(실시간성 낮아도 될 때)
- **이점**
    - 다수 사용자 활동을 빠르게 합쳐 최신성 보장
    - 효율적인 페이지네이션 가능
- **이슈사항**
    - 활동량 폭주 시 메모리·네트워크 부담
    - 삭제/수정 반영 지연 문제

# AI 활용 방안

### Algo-01

- **자연어 검색 보강**: 사용자가 “팔굽혀펴기 영상” 대신 “푸시업 영상”이라고 입력해도 AI가 동의어 확장.
- **의도 파악**: 키워드가 애매하면 “운동 종류/부위”로 의미 파악 후 검색어 재작성(Query Rewriting).
- **하이라이트 요약**: AI가 매칭된 문장만 뽑아 미리보기 제공.
- **이점**: 단순 키워드 매칭의 한계를 극복, 한국어 띄어쓰기/오타에도 강함.
- **이슈**: 동의어/재작성 품질이 낮으면 엉뚱한 결과 노출 → 로그 기반 지속 개선 필요.

---

### Algo-02

- **점수 가중치 학습**: AI가 사용자 클릭/체류시간을 분석해 views·likes·recency의 **가중치 자동 조정**.
- **트렌드 감지**: 단순 조회수 외에도 최근 급등한 영상을 “급상승” 태그로 표시.
- **이점**: 사용자 반응 기반 동적 랭킹 → “지금 뜨는 영상” 실시간 반영.
- **이슈**: AI 점수 조정은 블랙박스가 될 수 있어, 가중치 조정 규칙 투명성 필요.
    
    ---
    

### Algo-03

- **행동 로그 임베딩**: 시청·찜 데이터를 벡터화하여 “비슷한 사용자/영상”을 추천.
- **콜드스타트 해결**: 신규 사용자는 AI가 간단 프로필(성별·목표부위)로 초기 추천 제공.
- **다이나믹 설명**: “당신이 최근 하체 운동을 많이 봤어요 → 이런 스쿼트 추천” 같은 설명 자동 생성.
- **이점**: 단순 BFS+비트마스킹에 AI를 더해 추천 품질 상승.
- **이슈**: 개인화 추천은 개인정보 민감 → 익명화·투명 고지가 필수.
    
    ---
    

### Algo-04

- **자연어 위치 질의**: “강남역 근처 헬스장” 같은 입력을 AI가 위·경도 범위로 변환.
- **리뷰 요약**: AI가 헬스장 리뷰를 요약해 “가격대/혼잡도/청결도” 3줄 요약 제공.
- **혼잡도 예측**: AI가 과거 방문 기록을 학습해 “퇴근 시간엔 붐빔” 같은 예측 제공.
- **이점**: 단순 위치+거리 검색을 넘어 **의미/경험 기반 추천** 가능.
- **이슈**: 혼잡도·가격 예측은 정확도 문제 → “예측치”임을 명확히 표시해야 함.
    
    ---
    

### Algo-05

- **리뷰 요약 태깅**: 수많은 리뷰를 “장점/단점/난이도” 3요소로 자동 요약.
- **악성 리뷰 탐지**: AI가 욕설·스팸 리뷰를 자동 필터링.
- **감성 분석**: 단순 별점 외에 긍정/부정 비율을 제공.
- **이점**: 리뷰 읽기 시간을 줄이고, 악성 리뷰 관리 가능.
- **이슈**: 필터링 과도하면 정상 리뷰도 차단 → **신고/복원 절차** 필요.
    
    ---
    

### Algo-06

- **오타 교정**: “데드립프” 입력 시 “데드리프트” 자동 보정.
- **연관 검색어**: AI가 검색 로그를 분석해 “데드리프트 → 하체운동, 바벨운동” 추천.
- **개인화**: 과거 검색 이력을 반영해 개인별 순위 조정.
- **이점**: 검색 성공률 상승, 타이핑 줄어듦.
- **이슈**: 과거 로그 기반 추천 시 개인정보 보호 이슈 발생.

---

### Algo-07

- **추천 우선순위**: 단순 시간순 머지 대신, AI가 **사용자 관심도**를 반영해 중요 게시물 상단 배치.
- **요약 피드**: AI가 여러 활동을 묶어 “친구 3명이 이 영상을 좋아함”으로 축약.
- **노이즈 필터**: 반복적이거나 관심 없는 활동을 AI가 걸러냄.
- **이점**: 피드 과밀을 줄이고, 사용자 맞춤 노출 강화.
- **이슈**: 피드 노출 순위가 블랙박스처럼 느껴질 수 있음 → “왜 이걸 보여줬는지” 간단 설명 필요
